## Описание проекта

Сервис эмулирует работу сервисов по обработке ДНК, таких как 23andMe, но нацелен на полную конфиденциальность.
Алгоритмы реализованы с использованием гомоморфного шифрования, что позволяет сервисы осуществлять анализ на зашифрованных данных.

## Функциональные требования

### Анализ данных ДНК

Так как реальные алгоритмы, которые могут дать значимую информацию о ДНК, слишком сложны для реализации в рамках курса, в проекте будут реализованы упрощенные аналоги.

1. Подсчет количества различных видов нуклеотидов
2. Поиск заданной последовательности нуклеотидов

Формат незашифрованных данных: простой текст с цепочкой из символов C, G, A, T

В ходе передачи и обработки данных, данные находятся в зашифрованном виде, расшифровка происходит только на клиенте.

### Предоставление доступа к результатам по ссылке

Пользователь должен иметь возможность сгенерировать ссылку на результаты анализа, по которой получатель сможет получить доступ к данным.

При генерации ссылки должна быть возможность настроить следующие атрибуты:

- Срок доступности данных по ссылке
- К каким данным предоставляется доступ (количество нуклеотидов, найденные последовательности, сырые данные ДНК)

При генерации ссылки требуется указать открытый ключ получателя, полученный им в клиенте сервиса.
Таким образом, сервис выступает лишь временным хранилищем зашифрованных данных и не имеет к ним доступ в незашифрованном виде.

## Архитектура

Coming soon

## План выполнения проекта

- [x] 1. Собрать и изучить материалы по гомоморфному шифрованию
- [ ] 2. Изучить нормативную базы в области хранения персональных и медицинских данных
- [ ] 3. Реализовать библиотеку гомоморфного шифрования
- [ ] 4. Реализовать функционал анализа ДНК
  - [ ] 4.1. На сервере
  - [ ] 4.2. На клиенте
- [ ] 5. Реализовать функционал доступа по ссылке
  - [ ] 5.1. Настроить БД
  - [ ] 5.2. На сервере
  - [ ] 5.3. На клиенте
- [ ] 6. Публикация приложения с TLS шифрованием
- [ ] 7. Провести анализ уязвимостей в полученном решении при помощи инструментов автоматического анализа (Trivy, ZAP), по возможности внедрить сканирование в CI/CD
- [ ] 8. Провести анализ соответствия решения нормативной базе в области персональных и медицинских данных

## Ход выполнения проекта

### Гомоморфное шифрование

Собранные материалы можно найти в директории [docs](./docs/he)

Для реализации выбрана схема гомоморфного шифрования без бутстрапинга [BGV](<./docs/he/Fully_Homomorphic_Encryption_without_Bootstrapping_(BGV).pdf>),
так как она позволяет производить произвольное количество операций над данными и понятна для реализации.

### Нормативная база

Основными нормативными актами в области персональных и медицинских данных в РФ являются:

- [Федеральный закон от 27_07_2006 N 152-ФЗ "О персональных данных"](./docs/regulatory/Федеральный_закон_от_27_07_2006_N_152-ФЗ.pdf)
- [Федеральный закон от 21.11.2011 N 323-ФЗ "Об основах охраны здоровья граждан в Российской Федерации"](./docs/regulatory/Федеральный_закон_от_21.11.2011_N_323-ФЗ.pdf)

#### Основные требования

**Статья 10 ФЗ-152 Специальные категории персональных данных**

1. Обработка специальных категорий персональных данных, касающихся расовой, национальной
   принадлежности, политических взглядов, религиозных или философских убеждений, состояния здоровья,
   интимной жизни, не допускается, за исключением случаев, предусмотренных частями 2 и 2.1 настоящей
   статьи.

2. Обработка указанных в части 1 настоящей статьи специальных категорий персональных данных
   допускается в случаях, если:

1) субъект персональных данных дал согласие в письменной форме на обработку своих
   персональных данных;

4. обработка персональных данных осуществляется в медико-профилактических целях, в целях
   установления медицинского диагноза, оказания медицинских и медико-социальных услуг при условии, что
   обработка персональных данных осуществляется лицом, профессионально занимающимся медицинской
   деятельностью и обязанным в соответствии с законодательством Российской Федерации сохранять
   врачебную тайну;

**Статья 14 ФЗ-152 Право субъекта персональных данных на доступ к его персональным данным**

1. Субъект персональных данных имеет право на получение сведений, указанных в части 7
   настоящей статьи, за исключением случаев, предусмотренных частью 8 настоящей статьи. Субъект
   персональных данных вправе требовать от оператора уточнения его персональных данных, их
   блокирования или уничтожения в случае, если персональные данные являются неполными, устаревшими,
   неточными, незаконно полученными или не являются необходимыми для заявленной цели обработки, а
   также принимать предусмотренные законом меры по защите своих прав.

**Статья 18 ФЗ-152. Обязанности оператора при сборе персональных данных**

5. При сборе персональных данных, в том числе посредством информационно-телекоммуникационной сети "Интернет", оператор обязан обеспечить запись, систематизацию, накопление, хранение, уточнение (обновление, изменение), извлечение персональных данных граждан Российской Федерации с использованием баз данных, находящихся на территории Российской Федерации, за исключением случаев, указанных в пунктах 2, 3, 4, 8 части 1 статьи 6 настоящего Федерального закона

**Статья 19 ФЗ-152 Меры по обеспечению безопасности персональных данных при их обработке**

1. Оператор при обработке персональных данных обязан принимать необходимые правовые,
   организационные и технические меры или обеспечивать их принятие для защиты персональных данных от
   неправомерного или случайного доступа к ним, уничтожения, изменения, блокирования, копирования,
   предоставления, распространения персональных данных, а также от иных неправомерных действий в
   отношении персональных данных.

**Статья 20 ФЗ-323**

1. Необходимым предварительным условием медицинского вмешательства является дача
   информированного добровольного согласия гражданина или его законного представителя на
   медицинское вмешательство на основании предоставленной медицинским работником в
   доступной форме полной информации о целях, методах оказания медицинской помощи,
   связанном с ними риске, возможных вариантах медицинского вмешательства, о его
   последствиях, а также о предполагаемых результатах оказания медицинской помощи.

**Статья 13. ФЗ-323 Соблюдение врачебной тайны**

1. Сведения о факте обращения гражданина за оказанием медицинской помощи, состоянии
   его здоровья и диагнозе, иные сведения, полученные при его медицинском обследовании и
   лечении, составляют врачебную тайну.

#### Специфика проекта при обеспечении нормативных требований

1. Использование шифрование в транспорте и обработке исключает возможность просмотра персональных данных как третьими лицами, так и самим предоставителем услуг, что упрощает процесс контроля доступа к данным
2. Технология гомоморфного шифрования не регламентирована ФСТЭК или ФСБ, что усложнить прохождение сертификации
3. Предоставление письменного согласия противоречит идеи полной конфиденциальности, так как она связывает пользователя с фактом использования системы
